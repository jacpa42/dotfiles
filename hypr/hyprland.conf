# picker/menu stuff
$launch=$HOME/Projects/dotfiles/hypr/scripts/launch.sh
$supermenu=$launch $HOME/Projects/dotfiles/hypr/scripts/pickers/supermenu.sh
$launcher=$launch $HOME/Projects/dotfiles/hypr/scripts/pickers/app_launcher.sh
$screenshot=$launch $HOME/Projects/dotfiles/hypr/scripts/util/screenshot.sh
$color_picker=$HOME/Projects/dotfiles/hypr/scripts/util/color_picker.sh

# wallpaper stuff
$default_wallpaper=blue-flowers.jpg
$cyclewall=$HOME/Projects/dotfiles/hypr/scripts/util/cyclewall.sh
$wallpaper_directory=$HOME/Projects/muur_papier/

# volume controls
$increase_volume=$HOME/Projects/dotfiles/hypr/scripts/util/volume_increase.sh
$decrease_volume=$HOME/Projects/dotfiles/hypr/scripts/util/volume_decrease.sh
$mute_volume=$HOME/Projects/dotfiles/hypr/scripts/util/volume_mute.sh

# Main monitor
monitorv2 {
    output = DP-1
    mode = 2560x1440@240
    position = 0x0
    scale = 1
    transform = 0
}

# TV
monitorv2 {
    output = HDMI-A-1
    mode = 3840x2160@60
    position = -3840x0
    scale = 1
    transform = 0
}

# Laptop monitor
monitorv2 {
    output = eDP-1
    mode = 2560x1440@165
    position = 0x0 
    scale = 1
    transform = 0
}

exec-once=$cyclewall -w $wallpaper_directory -s "$default_wallpaper"
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=copyq --start-server
exec-once=/usr/lib/polkit-kde-authentication-agent-1
exec-once=alsactl restore
exec-once=foot --server
exec-once=ashell

# Gtk stuff
exec-once=gsettings set org.gnome.desktop.interface gtk-theme Adwaita
exec-once=gsettings set org.gnome.desktop.interface color-scheme prefer-dark
exec-once=gsettings set org.gnome.desktop.interface cursor-theme \'$CURSOR_THEME\'

input {
    follow_mouse=1
    repeat_rate=60
    repeat_delay=200
}

device {
    name=razer-razer-blade-keyboard
    kb_layout=gb
    kb_options=caps:escape
}

ecosystem {
	no_update_news=true
}

general {
    gaps_in=2
    gaps_out=0
    border_size=2
    col.active_border=rgba(e82424ff)
    col.inactive_border=rgba(24253799)
    layout=master
    allow_tearing=false
}

master {
  new_on_top=true
  new_status=master
  orientation=left
  mfact=0.5
}

decoration {
    rounding=0
    active_opacity=1
    inactive_opacity=1
    fullscreen_opacity=1
    blur {
        enabled=false
        size=1
        passes=1
        xray=true
    }
}

animations {
    enabled=no, please :)

    bezier=easeOutQuint,0.23,1,0.32,1
    bezier=easeInOutCubic,0.65,0.05,0.36,1
    bezier=linear,0,0,1,1
    bezier=almostLinear,0.5,0.5,0.75,1.0
    bezier=quick,0.15,0,0.1,1

    animation=global, 1, 10, default
    animation=border, 1, 5.39, easeOutQuint
    animation=windows, 1, 4.79, easeOutQuint
    animation=windowsIn, 1, 2.0, easeOutQuint, popin 87%
    animation=windowsOut, 1, 3, linear, popin 87%
    animation=fadeIn, 1, 1.73, almostLinear
    animation=fadeOut, 1, 1.46, almostLinear
    animation=fade, 1, 3.03, quick
    animation=layers, 1, 3.81, easeOutQuint
    animation=layersIn, 1, 4, easeOutQuint, fade
    animation=layersOut, 1, 1.5, linear, fade
    animation=fadeLayersIn, 1, 1.79, almostLinear
    animation=fadeLayersOut, 1, 1.39, almostLinear
    animation=workspaces, 1, 1.5, easeOutQuint
}

misc {
    disable_hyprland_logo=true
    disable_splash_rendering=true
    force_default_wallpaper=0
}

device {
    name=epic-mouse-v1
    sensitivity=0
}

cursor {
  hide_on_key_press=true
}

# Window rules

windowrule {
    name = No window can grab the entire screen on start-up
    match:class = *
    suppress_event = maximize
}
windowrule {
    name = By default tile every window
    match:class = *
    tile = true
}
windowrule {
    name = Tiled map editor rules
    match:class = org.mapeditor.tiled
    workspace = 6
}
windowrule {
    name = Mpv rules
    match:class = mpv
    fullscreen = true
    workspace = 7
}
windowrule {
    name = Zathura rules
    match:class = org.pwmt.zathura
    workspace = 5
}
windowrule {
    name = Qelectrotech rules
    match:class = (?i).*qelectrotech
    workspace = 6
}
windowrule {
    name = Spotify rules
    match:class = spotify
    workspace = 2
    opacity = 0.9
}
windowrule {
    name = Rules for aseprite
    match:class = Aseprite
    workspace = 6
    tile = true
}
windowrule {
    name = Rules for discord
    match:class = (?i)discord
    workspace = 1
    tile = true
}
windowrule {
    name = Rules for steam games
    match:class = .*steam_app.*
    workspace = 5
}
windowrule {
    name = Steam popup window rules
    match:class = steam
    workspace = 5
    opacity = 0.9
    float = true
}

windowrule {
    name = Steam popup window rules
    match:title = 'Sign in to Steam'
    workspace = 5
    center = true
    opacity = 0.9
    float = true
}
windowrule {
    name = Main steam window rules
    match:title = ^(Steam)$
    workspace = 5
    tile = true
}
windowrule {
    name = qutebrowser rules
    match:class = org.qutebrowser.qutebrowser
    workspace = 3
    opacity = 1.0
}
windowrule {
    name = firefox rules
    match:class = firefox
    workspace = 3
    opacity = 1.0
}
windowrule {
    name = footclient rules
    match:class = footclient
    workspace = 4
    tile = true
}
windowrule {
    name = Foot rules
    match:class = foot
    workspace = 4
    tile = true
}
windowrule {
    name = fixes davinci popup jank
    match:class = ^(resolve)$
    float = true
    workspace = 6
}
windowrule {
    name = tile the main davinci window
    match:title = .*DaVinci Resolve Studio.*
    tile = true
    workspace = 6
}
windowrule {
    name = some-name-for-this-rule
    match:class = org.inkscape.Inkscape
    workspace = 1
}
windowrule {
    name = Tricky towers fullscreen
    match:title = "Tricky Towers"
    workspace = 5
    float = true
    # fullscreen = true
}

# Stuff for terminal pop-up
windowrule {
    name = Terminal popup rules
    match:class = tpopup

    border_size = 0
    center = 1
    float = true
    no_anim = true
    pin = true
    size = monitor_w*0.6 monitor_h*0.6
    stay_focused = true
}

$mod=SUPER

bind=$mod, Q, exec, systemctl sleep
bind=$mod, T, togglefloating,
bind=$mod, W, killactive,
bind=$mod, RETURN, fullscreen,
bind=$mod CTRL SHIFT ALT, ESCAPE, exec, loginctl kill-user $(whoami)
bind=$mod, SPACE, exec, $launcher
bind=$mod, P, exec, $launch $HOME/.config/hypr/scripts/pickers/passwords.sh
bind=$mod, O, exec, $supermenu
bind=$mod, C, exec, $color_picker
bind=$mod, X, exec, $screenshot
bind=$mod, BACKSPACE, exec, footclient
bind=$mod, Z, exec, /usr/bin/woomer

bind=$mod, U, exec, $cyclewall -w $wallpaper_directory
bind=$mod SHIFT, U, exec, $cyclewall -w $wallpaper_directory -r
bind=$mod ALT, U, exec, $cyclewall -w $wallpaper_directory -s $default_wallpaper
bind=$mod CTRL, U, exec, $cyclewall -w $wallpaper_directory -R

bind=$mod, E, layoutmsg, rollnext
bind=$mod, R, layoutmsg, rollprev
bind=$mod ALT, E, cyclenext,
bind=$mod ALT, R, cyclenext, prev
bind=$mod SHIFT, E, layoutmsg, mfact -0.05
bind=$mod SHIFT, R, layoutmsg, mfact +0.05

bind=$mod, S, workspace, 1
bind=$mod, D, workspace, 2
bind=$mod, F, workspace, 3
bind=$mod, J, workspace, 4
bind=$mod, K, workspace, 5
bind=$mod, L, workspace, 6
bind=$mod, M, workspace, 7

bind=$mod ALT, S, movetoworkspace, 1
bind=$mod ALT, D, movetoworkspace, 2
bind=$mod ALT, F, movetoworkspace, 3
bind=$mod ALT, J, movetoworkspace, 4
bind=$mod ALT, K, movetoworkspace, 5
bind=$mod ALT, L, movetoworkspace, 6
bind=$mod ALT, M, movetoworkspace, 7

bind=$mod ALT, 0, exec, $screenshot
bind=$mod ALT, 1, exec, $player_playpause
bind=$mod ALT, 2, exec, $player_next
bind=$mod ALT, 3, exec, $player_previous
bind=$mod ALT, 4, exec, $decrease_volume
bind=$mod ALT, 5, exec, $increase_volume
bind=$mod ALT, 6, exec, $mute_volume

bindel=, XF86AudioRaiseVolume, exec, $increase_volume
bindel=, XF86AudioLowerVolume, exec, $decrease_volume
bindl=, XF86AudioMute, exec, $mute_volume

# Requires playerctl
bindl=, XF86AudioPlay, exec, playerctl play-pause
bindl=, XF86AudioPrev, exec, playerctl previous
bindl=, XF86AudioNext, exec, playerctl next

bindm=$mod, mouse:272, movewindow
bindm=$mod, mouse:273, resizewindow

# Fixes workspaces to monitor 1 and 2 and TV :)
workspace=1, monitor:DP-2
workspace=2, monitor:DP-2
workspace=3, monitor:DP-2
workspace=4, monitor:DP-1
workspace=5, monitor:DP-1
workspace=6, monitor:DP-1
workspace=7, monitor:HDMI-A-1
workspace=7, monitor:DP-1
workspace=7, monitor:DP-2
